/*!
 * headroom.js v0.7.0 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */
define(function(b,a,c){(function(i,d){var h={bind:!!(function(){}.bind),classList:"classList" in d.documentElement,rAF:!!(i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame)};i.requestAnimationFrame=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame;function g(l){this.callback=l;this.ticking=false}g.prototype={constructor:g,update:function(){this.callback&&this.callback();this.ticking=false},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this)));this.ticking=true}},handleEvent:function(){this.requestTick()}};function j(l){return l&&typeof i!=="undefined"&&(l===i||l.nodeType)}function k(m){if(arguments.length<=0){throw new Error("Missing arguments in extend function")}var l=m||{},o,n;for(n=1;n<arguments.length;n++){var p=arguments[n]||{};for(o in p){if(typeof l[o]==="object"&&!j(l[o])){l[o]=k(l[o],p[o])}else{l[o]=l[o]||p[o]}}}return l}function f(l){return l===Object(l)?l:{down:l,up:l}}function e(m,l){l=k(l,e.options);this.lastKnownScrollY=0;this.elem=m;this.debouncer=new g(this.update.bind(this));this.tolerance=f(l.tolerance);this.classes=l.classes;this.offset=l.offset;this.scroller=l.scroller;this.initialised=false;this.onPin=l.onPin;this.onUnpin=l.onUnpin;this.onTop=l.onTop;this.onNotTop=l.onNotTop}e.prototype={constructor:e,init:function(){if(!e.cutsTheMustard){return}this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);return this},destroy:function(){var l=this.classes;this.initialised=false;this.elem.classList.remove(l.unpinned,l.pinned,l.top,l.initial);this.scroller.removeEventListener("scroll",this.debouncer,false)},attachEvent:function(){if(!this.initialised){this.lastKnownScrollY=this.getScrollY();this.initialised=true;this.scroller.addEventListener("scroll",this.debouncer,false);this.debouncer.handleEvent()}},unpin:function(){var m=this.elem.classList,l=this.classes;if(m.contains(l.pinned)||!m.contains(l.unpinned)){m.add(l.unpinned);m.remove(l.pinned);this.onUnpin&&this.onUnpin.call(this)}},pin:function(){var m=this.elem.classList,l=this.classes;if(m.contains(l.unpinned)){m.remove(l.unpinned);m.add(l.pinned);this.onPin&&this.onPin.call(this)}},top:function(){var m=this.elem.classList,l=this.classes;if(!m.contains(l.top)){m.add(l.top);m.remove(l.notTop);this.onTop&&this.onTop.call(this)}},notTop:function(){var m=this.elem.classList,l=this.classes;if(!m.contains(l.notTop)){m.add(l.notTop);m.remove(l.top);this.onNotTop&&this.onNotTop.call(this)}},getScrollY:function(){return(this.scroller.pageYOffset!==undefined)?this.scroller.pageYOffset:(this.scroller.scrollTop!==undefined)?this.scroller.scrollTop:(d.documentElement||d.body.parentNode||d.body).scrollTop},getViewportHeight:function(){return i.innerHeight||d.documentElement.clientHeight||d.body.clientHeight},getDocumentHeight:function(){var l=d.body,m=d.documentElement;return Math.max(l.scrollHeight,m.scrollHeight,l.offsetHeight,m.offsetHeight,l.clientHeight,m.clientHeight)},getElementHeight:function(l){return Math.max(l.scrollHeight,l.offsetHeight,l.clientHeight)},getScrollerHeight:function(){return(this.scroller===i||this.scroller===d.body)?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(n){var m=n<0,l=n+this.getViewportHeight()>this.getScrollerHeight();return m||l},toleranceExceeded:function(m,l){return Math.abs(m-this.lastKnownScrollY)>=this.tolerance[l]},shouldUnpin:function(o,l){var m=o>this.lastKnownScrollY,n=o>=this.offset;return m&&n&&l},shouldPin:function(o,m){var l=o<this.lastKnownScrollY,n=o<=this.offset;return(l&&m)||n},update:function(){var n=this.getScrollY(),m=n>this.lastKnownScrollY?"down":"up",l=this.toleranceExceeded(n,m);if(this.isOutOfBounds(n)){return}if(n<=this.offset){this.top()}else{this.notTop()}if(this.shouldUnpin(n,l)){this.unpin()}else{if(this.shouldPin(n,l)){this.pin()}}this.lastKnownScrollY=n}};e.options={tolerance:{up:0,down:0},offset:0,scroller:i,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}};e.cutsTheMustard=typeof h!=="undefined"&&h.rAF&&h.bind&&h.classList;c.exports=e}(window,document))});